<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Python、Typescript、Go、C&#x2F;C++、asm、Bash">
<meta property="og:type" content="website">
<meta property="og:title" content="congdong007">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="congdong007">
<meta property="og:description" content="Python、Typescript、Go、C&#x2F;C++、asm、Bash">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Dong Cong">
<meta property="article:tag" content="Python、Typescript、Go、C&#x2F;C++、asm、Bash、Penetration Tester">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>congdong007</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="congdong007" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">congdong007</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Penetration Test、Software Developer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa  fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/congdong007" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/24/BashScript08-WhileLoops/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/24/BashScript08-WhileLoops/" class="post-title-link" itemprop="url">Bash Scripting 08 - While Loops</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-24 23:17:12" itemprop="dateCreated datePublished" datetime="2012-03-24T23:17:12-04:00">2012-03-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:53:37" itemprop="dateModified" datetime="2023-10-23T21:53:37-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-08-While-Loops/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 08 - While Loops</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>While loops are also fairly common and execute code while an expression is true. While loops have<br>a simple format and, like if, use the square brackets ([]) for the test:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ &lt;some <span class="built_in">test</span>&gt; ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&lt;perform an action&gt;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>Let’s re-create the previous example with a while loop:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./while.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># while loop example</span></span><br><span class="line">counter=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$counter</span> -lt 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;10.11.1.<span class="variable">$counter</span>&quot;</span></span><br><span class="line">((counter++))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./while.sh</span><br><span class="line">kali@kali:~$ ./while.sh</span><br><span class="line">10.11.1.1</span><br><span class="line">10.11.1.2</span><br><span class="line">10.11.1.3</span><br><span class="line">10.11.1.4</span><br><span class="line">10.11.1.5</span><br><span class="line">10.11.1.6</span><br><span class="line">10.11.1.7</span><br><span class="line">10.11.1.8</span><br><span class="line">10.11.1.9</span><br></pre></td></tr></table></figure>

<p>This is not the output we expected. This is a common mistake called an “off by one” error. In the<br>example above, we used -lt (less than) instead of -le (less than or equal to), so our counter only got<br>to nine, not ten as originally intended.</p>
<p>The ((counter++)) line uses the double-parenthesis (( )) construct to perform arithmetic<br>expansion and evaluation at the same time. In this particular case, we use it to increase our counter<br>variable by one. Let’s re-write the while loop and try the example again:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./while2.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># while loop example 2</span></span><br><span class="line">counter=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$counter</span> -le 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;10.11.1.<span class="variable">$counter</span>&quot;</span></span><br><span class="line">((counter++))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./while2.sh</span><br><span class="line">kali@kali:~$ ./while2.sh</span><br><span class="line">10.11.1.1</span><br><span class="line">10.11.1.2</span><br><span class="line">10.11.1.3</span><br><span class="line">10.11.1.4</span><br><span class="line">10.11.1.5</span><br><span class="line">10.11.1.6</span><br><span class="line">10.11.1.7</span><br><span class="line">10.11.1.8</span><br><span class="line">10.11.1.9</span><br><span class="line">10.11.1.10</span><br></pre></td></tr></table></figure>
<p>Our while loop is looking much better now.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/23/BashScript07-ForLoops/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/23/BashScript07-ForLoops/" class="post-title-link" itemprop="url">Bash Scripting 07 - For Loops</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-23 21:11:45" itemprop="dateCreated datePublished" datetime="2012-03-23T21:11:45-04:00">2012-03-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:53:32" itemprop="dateModified" datetime="2023-10-23T21:53:32-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-07-For-Loops/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 07 - For Loops</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>In computer programming, loops help us with repetitive tasks that we need to run until a certain<br>criteria is met. Iteration is particularly useful for penetration testers, so we recommend paying very<br>close attention to this section.<br>In Bash, the two most predominant loop commands are for and while. We will take a look at both.</p>
<p>For loops are very practical and work very well in Bash one-liners. This type of loop is used to<br>perform a given set of commands for each of the items in a list. Let’s briefly look at its general<br>syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var-name <span class="keyword">in</span> &lt;list&gt;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&lt;action to perform&gt;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>The for loop will take each item in the list (in order), assign that item as the value of the variable varname, perform the given action between do and done, and then go back to the top, grab the next<br>item in the list, and repeat the steps until the list is exhausted.</p>
<p>Let’s take a look at a more practical example that will quickly print the first 10 IP addresses in the<br>10.11.1.0&#x2F;24 subnet:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="keyword">for</span> ip <span class="keyword">in</span> $(<span class="built_in">seq</span> 1 10); <span class="keyword">do</span> <span class="built_in">echo</span> 10.11.1.<span class="variable">$ip</span>; <span class="keyword">done</span></span><br><span class="line">10.11.1.1</span><br><span class="line">10.11.1.2</span><br><span class="line">10.11.1.3</span><br><span class="line">10.11.1.4</span><br><span class="line">10.11.1.5</span><br><span class="line">10.11.1.6</span><br><span class="line">10.11.1.7</span><br><span class="line">10.11.1.8</span><br><span class="line">10.11.1.9</span><br><span class="line">10.11.1.10</span><br></pre></td></tr></table></figure>

<p>In this Bash one-liner, we used the seq command to print a sequence of numbers, in<br>this case the numbers one through ten. Each number is then assigned to the ip variable, and then<br>each IP address is displayed to the screen as the for loop runs multiple times, exiting at the end of<br>the sequence.<br>Another way of re-writing the previous for loop involves brace expansion using ranges. Brace<br>expansion using ranges is written giving the first and last values of the range and can be a sequence<br>of numbers or characters. This is known as a “sequence expression”:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;; <span class="keyword">do</span> <span class="built_in">echo</span> 10.11.1.<span class="variable">$i</span>;<span class="keyword">done</span></span><br><span class="line">10.11.1.1</span><br><span class="line">10.11.1.2</span><br><span class="line">10.11.1.3</span><br><span class="line">10.11.1.4</span><br><span class="line">10.11.1.5</span><br><span class="line">10.11.1.6</span><br><span class="line">10.11.1.7</span><br><span class="line">10.11.1.8</span><br><span class="line">10.11.1.9</span><br><span class="line">10.11.1.10</span><br></pre></td></tr></table></figure>

<p>There is a lot of potential for this type of loop. Displaying IP addresses to the screen may not seem<br>very useful, but we can use the same loop to run a port scan using nmap (which we discuss in<br>detail in another module). We can also attempt to use the ping command to see if any of the IP<br>addresses respond to ICMP echo requests, etc.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/19/BashScript06-BooleanLogicalOperations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/19/BashScript06-BooleanLogicalOperations/" class="post-title-link" itemprop="url">Bash Scripting 06 - Boolean Logical Operations</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-19 23:11:03" itemprop="dateCreated datePublished" datetime="2012-03-19T23:11:03-04:00">2012-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:53:28" itemprop="dateModified" datetime="2023-10-23T21:53:28-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-06-Boolean-Logical-Operations/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 06 - Boolean Logical Operations</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Boolean logical operators, like <strong><em>AND</em></strong> (&amp;&amp;) and <strong><em>OR</em></strong> (||) are somewhat mysterious because Bash<br>uses them in a variety of ways.<br>One common use is in command lists, which are chains of commands whose flow is controlled by<br>operators. The “|” (pipe) symbol is a commonly-used operator in a command list and passes the<br>output of one command to the input of another. Similarly, boolean logical operators execute<br>commands based on whether a previous command succeeded (or returned True or 0) or failed<br>(returned False or non-zero).<br>Let’s take a look at the <strong><em>AND</em></strong> (&amp;&amp;) boolean operator first, which executes a command only if the<br>previous command succeeds (or returns True or 0):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ user2=kali</span><br><span class="line">kali@kali:~$ grep <span class="variable">$user2</span> /etc/passwd &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$user2</span> found!&quot;</span></span><br><span class="line">kali:x:1000:1000:,,,:/home/kali:/bin/bash</span><br><span class="line">kali found!</span><br><span class="line">kali@kali:~$ user2=bob</span><br><span class="line">kali@kali:~$ grep <span class="variable">$user2</span> /etc/passwd &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$user2</span> found!&quot;</span></span><br></pre></td></tr></table></figure>

<p>In this example, we first assigned the username we are searching for to the user2 variable. Next,<br>we use the <code>grep</code> command to check if a certain user is listed in the <code>/etc/passwd</code> file, and if it is,<br><code>grep</code> returns True and the <code>echo</code> command is executed. However, when we try searching for a user<br>that we know does not exist in the <code>/etc/passwd</code> file, our <code>echo</code> command is not executed.</p>
<p>When used in a command list, the <strong><em>OR (||) operator is the opposite of <strong><em>AND (&amp;&amp;); it executes the next<br>command only if the previous command failed (returned False or non-zero):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$user2</span></span><br><span class="line">bob</span><br><span class="line">kali@kali:~$ grep <span class="variable">$user2</span> /etc/passwd &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$user2</span> found!&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$user2</span> not found</span></span><br><span class="line"><span class="string">!&quot;</span></span><br><span class="line">bob not found!</span><br></pre></td></tr></table></figure>

<p>In the above example, we took our previous command a step further and added the <strong><em>OR</em></strong> (||) operator<br>followed by a second <code>echo</code> command. Now, when <code>grep</code> does not find a matching line and returns<br>False, the second <code>echo</code> command after the <strong><em>OR</em></strong> (||) operator is executed instead.<br>These operators can also be used in a test to compare variables or the results of other tests. When<br>used this way, <strong><em>AND</em></strong> (&amp;&amp;) combines two simple conditions, and if they are both true, the combined<br>result is success (or True or 0).<br>Consider this example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./and.sh</span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="comment"># and example</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> == <span class="string">&#x27;kali&#x27;</span> ] &amp;&amp; [ <span class="variable">$HOSTNAME</span> == <span class="string">&#x27;kali&#x27;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Multiple statements are true!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Not much to see here...&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./and.sh</span><br><span class="line">kali@kali:~$ ./and.sh</span><br><span class="line">Multiple statements are <span class="literal">true</span>!</span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$USER</span> &amp;&amp; <span class="built_in">echo</span> <span class="variable">$HOSTNAME</span></span><br><span class="line">kali</span><br><span class="line">kali</span><br></pre></td></tr></table></figure>

<p>In this example, we used <strong><em>AND</em></strong> (&amp;&amp;) to test multiple conditions and since both variable comparisons<br>were true, the whole if line succeeded, so the then branch executed.<br>When used in a test, the <strong><em>OR</em></strong> (||) boolean operator is used to test one or more conditions, but only<br>one of them has to be true to count as success.<br>Let’s take a look at an example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./or.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># or example</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> == <span class="string">&#x27;kali&#x27;</span> ] || [ <span class="variable">$HOSTNAME</span> == <span class="string">&#x27;pwn&#x27;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;One condition is true, this line is printed&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You are out of luck!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./or.sh</span><br><span class="line">kali@kali:~$ ./or.sh</span><br><span class="line">One condition is <span class="literal">true</span>, this line is printed</span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$USER</span> &amp;&amp; <span class="built_in">echo</span> <span class="variable">$HOSTNAME</span></span><br><span class="line">kali</span><br><span class="line">kali</span><br></pre></td></tr></table></figure>

<p>In this example, we used <strong><em>OR</em></strong> (||) to test multiple conditions and since one of the variable<br>comparisons was true, the whole if line succeeded, so the then branch executed.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/17/BashScript05-IfElseElifStatements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/17/BashScript05-IfElseElifStatements/" class="post-title-link" itemprop="url">Bash Scripting 05 - If, Else, Elif Statements</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-17 22:24:49" itemprop="dateCreated datePublished" datetime="2012-03-17T22:24:49-04:00">2012-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:53:23" itemprop="dateModified" datetime="2023-10-23T21:53:23-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-05-If-Else-Elif-Statements/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 05 - If, Else, Elif Statements</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Conditional statements allow us to perform different actions based on different conditions. The<br>most common conditional Bash statements include if, else, and elif.<br>The if statement is relatively simple–it checks to see if a condition is true–but it requires a very<br>specific syntax. Pay careful attention to this syntax, especially the use of required spaces:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ &lt;some <span class="built_in">test</span>&gt; ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">&lt;perform an action&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>In this listing, if “some test” evaluates as true, the script will “perform an action”, or any commands<br>between then and fi. Let’s look at an actual example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./if.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># if statement example</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;What is your age: &quot;</span> age</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$age</span> -lt 16 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You might need parental permission to take this course!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./if.sh</span><br><span class="line">kali@kali:~$ ./if.sh</span><br><span class="line">What is your age: 15</span><br><span class="line">You might need parental permission to take this course!</span><br></pre></td></tr></table></figure>

<p>In this example, we used an if statement to check the age entered by a user. If the entered age was<br>less than (-lt) 16, the script would output a warning message.<br>The square brackets (“[“ and “]”) in the if statement above are actually a reference to the test<br>command. This simply means we can use all of the operators that are allowed by the test<br>command. Some of the most common operators include:</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description: Expression True if…</th>
</tr>
</thead>
<tbody><tr>
<td>!EXPRESSION</td>
<td>The EXPRESSION is false.</td>
</tr>
<tr>
<td>-n STRING</td>
<td>STRING length is greater than zero</td>
</tr>
<tr>
<td>-z STRING</td>
<td>The length of STRING is zero (empty)</td>
</tr>
<tr>
<td>STRING1 !&#x3D; STRING2</td>
<td>STRING1 is not equal to STRING2</td>
</tr>
<tr>
<td>STRING1 &#x3D; STRING2</td>
<td>STRING1 is equal to STRING2</td>
</tr>
<tr>
<td>INTEGER1 -eq INTEGER2</td>
<td>INTEGER1 is equal to INTEGER2</td>
</tr>
<tr>
<td>INTEGER1 -ne INTEGER2</td>
<td>INTEGER1 is not equal to INTEGER2</td>
</tr>
<tr>
<td>INTEGER1 -gt INTEGER2</td>
<td>INTEGER1 is greater than INTEGER2</td>
</tr>
<tr>
<td>INTEGER1 -lt INTEGER2</td>
<td>INTEGER1 is less than INTEGER2</td>
</tr>
<tr>
<td>INTEGER1 -ge INTEGER2</td>
<td>INTEGER1 is greater than or equal to INTEGER 2</td>
</tr>
<tr>
<td>INTEGER1 -le INTEGER2</td>
<td>INTEGER1 is less than or equal to INTEGER 2</td>
</tr>
<tr>
<td>-d FILE</td>
<td>FILE exists and is a directory</td>
</tr>
<tr>
<td>-e FILE</td>
<td>FILE exists</td>
</tr>
<tr>
<td>-r FILE</td>
<td>FILE exists and has read permission</td>
</tr>
<tr>
<td>-s FILE</td>
<td>FILE exists and it is not empty</td>
</tr>
<tr>
<td>-w FILE</td>
<td>FILE exists and has write permission</td>
</tr>
<tr>
<td>-x FILE</td>
<td>FILE exists and has execute permission</td>
</tr>
</tbody></table>
<p>With the above in mind, our previous example using if can be rewritten without square brackets as<br>follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./if2.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># if statement example 2</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;What is your age: &quot;</span> age</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$age</span> -lt 16</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You might need parental permission to take this course!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./if2.sh</span><br><span class="line">kali@kali:~$ ./if2.sh</span><br><span class="line">What is your age: 15</span><br><span class="line">You might need parental permission to take this course!</span><br></pre></td></tr></table></figure>

<p>Even though this example is functionally equivalent to the example using square brackets, using<br>square brackets makes the code slightly easier to read.<br>We can also perform a certain set of actions if a statement is true and another set if it is false. To<br>do this, we can use the else statement, which has the following syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ &lt;some <span class="built_in">test</span>&gt; ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">&lt;perform action&gt;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&lt;perform another action&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>Let’s extend our previous “age” example to include the else statement:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./else.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># else statement example</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;What is your age: &quot;</span> age</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$age</span> -lt 16 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You might need parental permission to take this course!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Welcome to the course!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./else.sh</span><br><span class="line">kali@kali:~$ ./else.sh</span><br><span class="line">What is your age: 21</span><br><span class="line">Welcome to the course!</span><br></pre></td></tr></table></figure>

<p>Notice that the else statement was executed when the entered age was greater than (or more<br>specifically “not less than”) sixteen.<br>The if and else statements only allow two code execution branches. We can add additional<br>branches with the elif statement which uses the following pattern:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ &lt;some <span class="built_in">test</span>&gt; ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">&lt;perform action&gt;</span><br><span class="line"><span class="keyword">elif</span> [ &lt;some <span class="built_in">test</span>&gt; ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">&lt;perform different action&gt;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&lt;perform yet another different action&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>Let’s again extend our “age” example to include the elif statement:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./elif.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># elif example</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;What is your age: &quot;</span> age</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$age</span> -lt 16 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You might need parental permission to take this course!&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$age</span> -gt 60 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hats off to you, respect!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Welcome to the course!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./elif.sh</span><br><span class="line">kali@kali:~$ ./elif.sh</span><br><span class="line">What is your age: 65</span><br><span class="line">Hats off to you, respect!</span><br></pre></td></tr></table></figure>

<p>In this example, the code execution flow was slightly more complex. In order of operation, the then<br>branch executes if the entered age is less than sixteen, the elif branch is entered (and the “Hats<br>off..” message displayed) if the age is greater than sixty, and the else branch executes only if the<br>age is greater than sixteen but less than sixty.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/13/BashScript04-ReadingUserInput/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/13/BashScript04-ReadingUserInput/" class="post-title-link" itemprop="url">Bash Scripting 04 - Reading User Input</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-13 21:21:31" itemprop="dateCreated datePublished" datetime="2012-03-13T21:21:31-04:00">2012-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:49:39" itemprop="dateModified" datetime="2023-10-23T21:49:39-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-04-Reading-User-Input/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 04 - Reading User Input</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Command-line arguments are a form of user input, but we can also capture interactive user input<br>while a script is running with the read command. In this example, we will use read to capture user<br>input and assign it to a variable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./input.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello there, would you like to learn how to hack: Y/N?&quot;</span></span><br><span class="line"><span class="built_in">read</span> answer</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Your answer was <span class="variable">$answer</span>&quot;</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./input.sh</span><br><span class="line">kali@kali:~$ ./input.sh</span><br><span class="line">Hello there, would you like to learn how to hack: Y/N?</span><br><span class="line">Y</span><br><span class="line">Your answer was Y</span><br></pre></td></tr></table></figure>

<p>We can alter the behavior of the read command with various command line options. Two of the<br>most commonly used options include -p, which allows us to specify a prompt, and -s, which makes<br>the user input silent. The latter is ideal for capturing user credentials:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./input2.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Prompt the user for credentials</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&#x27;Username: &#x27;</span> username</span><br><span class="line"><span class="built_in">read</span> -sp <span class="string">&#x27;Password: &#x27;</span> password</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Thanks, your creds are as follows: &quot;</span> <span class="variable">$username</span> <span class="string">&quot; and &quot;</span> <span class="variable">$password</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./input2.sh</span><br><span class="line">kali@kali:~$ ./input2.sh</span><br><span class="line">Username: kali</span><br><span class="line">Password:</span><br><span class="line">Thanks, your creds are as follows: kali and nothing2see!</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/07/BashScript03-Arguments/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/07/BashScript03-Arguments/" class="post-title-link" itemprop="url">Bash Scripting 03 - Arguments</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-07 20:53:07" itemprop="dateCreated datePublished" datetime="2012-03-07T20:53:07-05:00">2012-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:49:42" itemprop="dateModified" datetime="2023-10-23T21:49:42-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-03-Arguments/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 03 - Arguments</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Not all Bash scripts require arguments. However, it is extremely important to understand how<br>they are interpreted by Bash and how to use them. We have already executed Linux commands<br>with arguments. For example, when we run the command <code>ls -l /var/log</code>, both <code>-l</code> and <code>/var/log</code><br>are arguments to the ls command.<br>Bash scripts are no different; we can supply command-line arguments and use them in our scripts:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./arg.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The first two arguments are <span class="variable">$1</span> and <span class="variable">$2</span>&quot;</span></span><br><span class="line">kali@kali:~$ <span class="built_in">chmod</span> +x ./arg.sh</span><br><span class="line">kali@kali:~$ ./arg.sh hello there</span><br><span class="line">The first two arguments are hello and there</span><br></pre></td></tr></table></figure>
<p>Here we created a simple Bash script, set executable permissions on it, and then ran it<br>with two arguments. The $1 and $2 variables represent the first and second arguments passed to<br>the script. Let’s explore a few special Bash variables:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>$0</td>
<td>The name of the Bash script</td>
</tr>
<tr>
<td>$1 - $9</td>
<td>The first 9 arguments to the Bash script</td>
</tr>
<tr>
<td>$#</td>
<td>Number of arguments passed to the Bash script</td>
</tr>
<tr>
<td>$@</td>
<td>All arguments passed to the Bash script</td>
</tr>
<tr>
<td>$?</td>
<td>The exit status of the most recently run process</td>
</tr>
<tr>
<td>$$</td>
<td>The process ID of the current script</td>
</tr>
<tr>
<td>$USER</td>
<td>The username of the user running the script</td>
</tr>
<tr>
<td>$HOSTNAME</td>
<td>The hostname of the machine</td>
</tr>
<tr>
<td>$RANDOM</td>
<td>A random number</td>
</tr>
<tr>
<td>$LINENO</td>
<td>The current line number in the script</td>
</tr>
</tbody></table>
<p>Some of these special variables can be very useful when debugging a script. For example, we might<br>be able to obtain the exit status of a command to determine whether it was successfully executed<br>or not.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/05/BashScript02-Variables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/05/BashScript02-Variables/" class="post-title-link" itemprop="url">Bash Scripting 02 - Variables</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-05 21:45:38" itemprop="dateCreated datePublished" datetime="2012-03-05T21:45:38-05:00">2012-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:48:39" itemprop="dateModified" datetime="2023-10-23T21:48:39-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-02-Variables/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 02 - Variables</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Variables are named places to temporarily store data. We can set (or “declare”) a variable, which<br>assigns a value to it, or read a variable, which will “expand” or “resolve” it to its stored value.</p>
<p>We can declare variable values in a number of ways. The easiest method is to set the value directly<br>with a simple name&#x3D;value declaration. Notice that there are no spaces before or after the “&#x3D;” sign:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ first_param=Super</span><br></pre></td></tr></table></figure>

<p>Declaring a variable is pointless unless we can reference it. To do this, we precede the variable with<br>the “<strong><em>$</em></strong>” character. Whenever Bash encounters this syntax in a command, it replaces the variable<br>name with its value (“expands” the variable) before execution:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ first_param=Super</span><br><span class="line">kali@kali:~$ last_param=Hero</span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$first_param</span> <span class="variable">$last_param</span></span><br><span class="line">Super Hero</span><br></pre></td></tr></table></figure>

<p>Variable names may be uppercase, lowercase, or a mixture of both. However, Bash is casesensitive so we must be consistent when declaring and expanding variables. In addition, it’s good<br>practice to use descriptive variable names, which make our scripts much easier to read and<br>maintain.</p>
<p>Be advised that Bash interprets certain characters in specific ways. For example, this declaration<br>demonstrates an improper multi-value variable declaration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ greeting=Hello World</span><br><span class="line">bash: World: <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure>

<p>This was not necessarily what we expected. To fix this, we can use either single quotes (<strong><em>‘</em></strong>) or double<br>quotes (<strong><em>“</em></strong>) to enclose our text. However, Bash treats single and double quotes differently. When<br>encountering single quotes, Bash interprets every enclosed character literally. When enclosed in<br>double quotes, all characters are viewed literally except “$”, “&#96;”, and “&quot; meaning variables will be<br>expanded in an initial substitution pass on the enclosed text.</p>
<p>A simple example will help clarify this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ greeting=<span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$greeting</span></span><br><span class="line">Hello World</span><br><span class="line">kali@kali:~$ greeting2=<span class="string">&quot;New <span class="variable">$greeting</span>&quot;</span></span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$greeting2</span></span><br><span class="line">New Hello World</span><br></pre></td></tr></table></figure>

<p>In this example, the single-quote-enclosed declaration of greeting preserved the value of our text<br>exactly and did not interpret the space as a command delimiter. However, in the double-quoteenclosed declaration of greeting2, Bash expanded $greeting to its value (“Hello World”), honoringthe special meaning of the “<strong><em>$</em></strong>” character.<br>We can also set the value of the variable to the result of a command or program. This is known as<br>command substitution, which allows us to take the output of a command or program (what<br>would normally be printed to the screen) and have it saved as the value of a variable.<br>To do this, place the variable name in parentheses “<strong><em>()</em></strong>”, preceded by a “<strong><em>$</em></strong>” character:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ user=$(<span class="built_in">whoami</span>)</span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$user</span></span><br><span class="line">kali</span><br></pre></td></tr></table></figure>

<p>Here we assigned the output of the whoami command to the user variable. We then<br>displayed its value. An alternative syntax for command substitution using the backtick, or grave,<br>character (&#96;) is shown below:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ user2=`<span class="built_in">whoami</span>`</span><br><span class="line">kali@kali:~$ <span class="built_in">echo</span> <span class="variable">$user2</span></span><br><span class="line">kali</span><br></pre></td></tr></table></figure>

<p>The backtick method is older and typically discouraged as there are differences in how the two<br>methods of command substitution behave. It is also important to note that command<br>substitution happens in a subshell and changes to variables in the subshell will not alter variables<br>from the master process. This is demonstrated in the following example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ <span class="built_in">cat</span> ./subshell.sh</span><br><span class="line"><span class="comment">#!/bin/bash -x</span></span><br><span class="line">var1=value1</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var1</span></span><br><span class="line">var2=value2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var2</span></span><br><span class="line">$(var1=newvar1)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var1</span></span><br><span class="line">`var2=newvar2`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var2</span></span><br><span class="line">kali@kali:~$ ./subshell.sh</span><br><span class="line">+ var1=value1</span><br><span class="line">+ <span class="built_in">echo</span> value1</span><br><span class="line">value1</span><br><span class="line">+ var2=value2</span><br><span class="line">+ <span class="built_in">echo</span> value2</span><br><span class="line">value2</span><br><span class="line">++ var1=newvar1</span><br><span class="line">+ <span class="built_in">echo</span> value1</span><br><span class="line">value1</span><br><span class="line">++ var2=newvar2</span><br><span class="line">+ <span class="built_in">echo</span> value2</span><br><span class="line">value2</span><br><span class="line">kali@kali:~$</span><br></pre></td></tr></table></figure>

<p>In this example, first note that we changed the shebang, adding in the -x flag. This instructed Bash<br>to print additional debug output, so we could more easily see the commands that were executed<br>and their results. As we view this output, notice that commands preceded with a single “+” character<br>were executed in the current shell and commands preceded with a double “++” were executed in a<br>subshell.<br>This allows us to clearly see that the second declarations of var1 and var2 happened inside a<br>subshell and did not change the values in the current shell as the initial declarations did.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2012/03/02/BashScript01-IntroduceBashScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/02/BashScript01-IntroduceBashScript/" class="post-title-link" itemprop="url">Bash Scripting 01 - Intro to Bash Scripting</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2012-03-02 22:27:59" itemprop="dateCreated datePublished" datetime="2012-03-02T22:27:59-05:00">2012-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-23 21:48:25" itemprop="dateModified" datetime="2023-10-23T21:48:25-04:00">2023-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/" itemprop="url" rel="index"><span itemprop="name">Bash</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Bash/Bash-Scripting-01-Intro-to-Bash-Scripting/" itemprop="url" rel="index"><span itemprop="name">Bash Scripting 01 - Intro to Bash Scripting</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The GNU Bourne-Again Shell (Bash) is a powerful work environment and scripting engine. A<br>competent security professional skillfully leverages Bash scripting to streamline and automate<br>many Linux tasks and procedures. In this module, we will introduce Bash scripting and explore<br>several practical scenarios.</p>
<p>A Bash script is a plain-text file that contains a series of commands that are executed as if they had<br>been typed at a terminal prompt. Generally speaking, Bash scripts have an optional extension of<br>.sh (for ease of identification), begin with <strong><em>#!&#x2F;bin&#x2F;bash</em></strong> and must have executable permissions set<br>before they can be executed. Let’s begin with a simple “Hello World” Bash script, file named hello-world.sh:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Hello World Bash Script</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>

<p>This script has several components worth explaining:<br>• Line 1: <strong><em>#!</em></strong> is commonly known as the shebang, and is ignored by the Bash interpreter. The<br>second part, <strong><em>&#x2F;bin&#x2F;bash</em></strong>, is the absolute path to the interpreter, which is used to run the<br>script. This is what makes this a “Bash script” as opposed to another type of shell script, like<br>a “C Shell script”, for example.<br>• Line 2: # is used to add a comment, so all text that follows it is ignored.<br>• Line 3: echo “Hello World!” uses the echo Linux command utility to print a given string to the<br>terminal, which in this case is “Hello World!”.</p>
<p>Next, let’s make the script executable and run it:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ chmod +x hello-world.sh</span><br><span class="line">kali@kali:~$ ./hello-world.sh</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<p>The chmod command, along with the +x option is used to make the script executable.<br><strong><em>.&#x2F;helloworld.sh</em></strong> is used to actually run it.<br>The <strong><em>.&#x2F;</em></strong> notation may seem confusing but this is simply a path<br>notation indicating that this script is in the current directory. Whenever we type a command, Bash<br>tries to find it in a series of directories stored in a variable called PATH. Since our home directory<br>is not included in that variable, we must use the relative path to our Bash script in order for Bash<br>to “find it” and run it.</p>
<p>Now that we have created our first Bash script,next we will explore Bash in a bit more detail.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2011/10/22/SimplePluginSystemByPython/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2011/10/22/SimplePluginSystemByPython/" class="post-title-link" itemprop="url">A Simple Plugin System by Python</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2011-10-22 16:41:33" itemprop="dateCreated datePublished" datetime="2011-10-22T16:41:33-04:00">2011-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-18 17:50:41" itemprop="dateModified" datetime="2023-10-18T17:50:41-04:00">2023-10-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/System-Architecture/" itemprop="url" rel="index"><span itemprop="name">System Architecture</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/System-Architecture/Plugin-Pattern/" itemprop="url" rel="index"><span itemprop="name">Plugin Pattern</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Due to the requirements of my work, I needed to design an open software system, and immediately thought of the Python language. As a result, I designed a simple and easily extensible plugin system.</p>
<p>Here’s the code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#main.py</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PluginManager</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.plugins = []</span><br><span class="line">        self.func_name = <span class="string">&quot;MyPlugin&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_plugin</span>(<span class="params">self, plugin_name</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            plugin_module = importlib.import_module(<span class="string">f&#x27;plugins.<span class="subst">&#123;plugin_name&#125;</span>&#x27;</span>)</span><br><span class="line">            plugin_instance = <span class="built_in">getattr</span>(plugin_module, self.func_name)()</span><br><span class="line">            self.plugins.append(plugin_instance)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;plugin <span class="subst">&#123;plugin_name&#125;</span> loaded.&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> ImportError:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Load plugin <span class="subst">&#123;plugin_name&#125;</span> failed.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_plugins</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> plugin <span class="keyword">in</span> self.plugins:</span><br><span class="line">            plugin.run()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    manager = PluginManager()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;1. Add Plugin&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;2. Run Plugin&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;3. Quit&quot;</span>)</span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&quot;Your Select: &quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">            plugin_name = <span class="built_in">input</span>(<span class="string">&quot;Please input the name of plugin: &quot;</span>)</span><br><span class="line">            manager.load_plugin(plugin_name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&quot;2&quot;</span>:</span><br><span class="line">            manager.run_plugins()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&quot;3&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Then, you create a directory named ‘<strong><em>plugins</em></strong>.’ In this directory, you can add your plugin, which must define a class named <strong><em>‘MyPlugin’</em></strong> and must have a function named <strong><em>‘run’</em></strong>. Here is the simple code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#my_plugin</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPlugin</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;MyPlugin is running&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>The following is the running process:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. Add Plugin</span><br><span class="line">2. Run Plugin</span><br><span class="line">3. Quit</span><br><span class="line">Your Select: 1</span><br><span class="line">Please input the name of plugin: my_plugin</span><br><span class="line">plugin my_plugin loaded.</span><br><span class="line">1. Add Plugin</span><br><span class="line">2. Run Plugin</span><br><span class="line">3. Quit</span><br><span class="line">Your Select: 2</span><br><span class="line">MyPlugin is running</span><br><span class="line">1. Add Plugin</span><br><span class="line">2. Run Plugin</span><br><span class="line">3. Quit</span><br><span class="line">Your Select: 3</span><br><span class="line">PS C:\Users\xxx\Desktop\yyy\plugin-system&gt;</span><br></pre></td></tr></table></figure>

<p>You can use this model to design a big and an opened software system.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2011/10/16/shellcodewrite/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dong Cong">
      <meta itemprop="description" content="Python、Typescript、Go、C/C++、asm、Bash">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congdong007">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2011/10/16/shellcodewrite/" class="post-title-link" itemprop="url">Shellcode Written in Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2011-10-16 11:54:47" itemprop="dateCreated datePublished" datetime="2011-10-16T11:54:47-04:00">2011-10-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-17 12:05:08" itemprop="dateModified" datetime="2023-10-17T12:05:08-04:00">2023-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Penetration-Test/" itemprop="url" rel="index"><span itemprop="name">Penetration Test</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Penetration-Test/shellcode/" itemprop="url" rel="index"><span itemprop="name">shellcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Before you start learning shellcode development, please install NASM on your Linux system. Here’s the shellcode code:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">section .text</span><br><span class="line"></span><br><span class="line">global _start</span><br><span class="line"></span><br><span class="line">_start:</span><br><span class="line"></span><br><span class="line">jmp short callShellcode</span><br><span class="line"></span><br><span class="line">shellcode:</span><br><span class="line"></span><br><span class="line">pop esi                     ; Pop <span class="string">&#x27;/bin/sh&#x27;</span> from the stack into esi</span><br><span class="line">xor eax, eax                ; Set eax to NULL</span><br><span class="line">mov byte [esi + 7], al      ; Null-terminate <span class="string">&#x27;/bin/sh&#x27;</span> using the low byte of eax</span><br><span class="line">lea ebx, [esi]              ; Load the address of <span class="string">&#x27;/bin/sh&#x27;</span> into ebx</span><br><span class="line">mov dword [esi + 8], ebx</span><br><span class="line">lea ecx, [esi + 8]          ; Load the address of the argv array into ecx</span><br><span class="line">mov dword [esi + 12], eax</span><br><span class="line">lea edx, [esi + 12]         ; Load the address of the NULL terminator into edx</span><br><span class="line">mov al, 0x0b               ; Set al to 0x0b, the system call number <span class="keyword">for</span> execve</span><br><span class="line">int 0x80                   ; Trigger the syscall</span><br><span class="line"></span><br><span class="line">callShellcode:</span><br><span class="line"></span><br><span class="line">call shellcode</span><br><span class="line">db <span class="string">&#x27;/bin/sh&#x27;</span></span><br></pre></td></tr></table></figure>

<p>After saving this code to a file named “shellx.asm,” you need to compile it using NASM to obtain the hexadecimal representation of the code. Use the following commands:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nasm -f elf shellx.asm</span><br><span class="line">ld -o shellx shellx.o -m elf_i386</span><br></pre></td></tr></table></figure>

<p>This will generate a “shellx” file. However, it’s not executable yet. You’ll need to use the “objdump” command to extract the hexadecimal code. You can use a Bash script like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(objdump -d <span class="string">&quot;<span class="variable">$1</span>&quot;</span> | <span class="built_in">tr</span> <span class="string">&#x27;\t&#x27;</span> <span class="string">&#x27; &#x27;</span> | <span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;\n&#x27;</span> | egrep <span class="string">&#x27;^[0-9a-f]&#123;2&#125;$&#x27;</span>); <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;\x<span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n&quot;</span></span><br></pre></td></tr></table></figure>

<p>To validate your assembly code, you’ll need a C program as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">char code[] = <span class="string">&quot;\xeb\x18\x5e\x31\xc0\x88\x46\x07\x8d\x1e\x89\x5e\x08\x8d\x4e\x08\x89\x46\x0c\x8d\x56\x0c\xb0\x0b\xcd\x80\xe8\xe3\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68&quot;</span>;</span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv) &#123;</span><br><span class="line">    int (*func)();</span><br><span class="line">    func = (int (*)()) code;</span><br><span class="line">    (int)(*func)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Compile this code with the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -o shellcodetest shellcodetest.c -m32 -z execstack</span><br></pre></td></tr></table></figure>

<p>This will produce an executable, “shellcodetest.” When you run it, you’ll get a shell with root privileges:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/kali/shellCode_train<span class="comment"># ./shellcodetest</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">    exit.asm     hello     shellcodetest    shellx.asm</span><br><span class="line">    exit.o       hello.asm  shellcodetest.c  shellx.o</span><br><span class="line">    getshellcode.sh  hello.o    shellx</span><br><span class="line"><span class="comment"># whoami</span></span><br><span class="line">    root</span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dong Cong"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Dong Cong</p>
  <div class="site-description" itemprop="description">Python、Typescript、Go、C/C++、asm、Bash</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dong Cong</span>

  


</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
